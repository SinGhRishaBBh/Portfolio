<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rishabh Raj ‚Ä¢ GitHub-style Portfolio</title>
<style>
:root{
  --bg:#0d1117; --panel:#0f1720; --muted:#8b949e; --accent:#58a6ff; --card:#161b22;
  --light-bg:#f6f8fa; --light-panel:#ffffff; --light-text:#24292f; --light-accent:#0969da;
  --glass: rgba(255,255,255,0.03); --accent-2:#7dd3fc;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:var(--bg); color:#c9d1d9; -webkit-font-smoothing:antialiased;
}
/* Header */
header{ display:flex; justify-content:space-between; align-items:center;
  padding:14px 20px; border-bottom:1px solid rgba(255,255,255,0.03); background:linear-gradient(180deg, rgba(0,0,0,0.12), transparent);
  position:sticky; top:0; z-index:50;
}
.brand{display:flex;gap:12px;align-items:center}
.brand img{width:52px;height:52px;border-radius:50%;border:2px solid rgba(255,255,255,0.04);object-fit:cover}
.who{font-weight:700;font-size:17px}
.sub{font-size:12px;color:var(--muted)}
.actions{display:flex;gap:10px;align-items:center}
button.btn{padding:8px 10px;border-radius:8px;border:0;background:var(--glass);color:inherit;cursor:pointer}
/* Layout */
.container{max-width:1100px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:300px 1fr;gap:18px;align-items:start}
@media (max-width:920px){ .container{grid-template-columns:1fr} header{padding:12px} .brand img{width:44px;height:44px} }
.card{background:var(--panel);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.profile{text-align:center}
.profile img{width:96px;height:96px;border-radius:999px;object-fit:cover;border:2px solid rgba(255,255,255,0.04)}
.profile h2{margin:10px 0 4px;font-size:18px}
.profile p{margin:0;color:var(--muted);font-size:13px;line-height:1.35}
.socials{display:flex;gap:8px;justify-content:center;margin-top:10px}
.socials a{color:var(--accent);text-decoration:none;font-weight:600;font-size:13px}
.sectionTitle{display:flex;align-items:center;justify-content:space-between}
.repo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:12px}
.repo{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);transition:transform .15s,box-shadow .15s}
.repo:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(2,6,23,0.6)}
.repo h4{margin:0 0 6px 0;font-size:15px}
.repo h4 a{color:var(--accent);text-decoration:none;font-weight:600}
.repo p{margin:0 0 8px;color:var(--muted);font-size:13px;min-height:42px;white-space:pre-wrap}
.badges{display:flex;flex-wrap:wrap;gap:8px}
.lang{background:rgba(255,255,255,0.04);padding:5px 8px;border-radius:999px;font-size:12px;color:#dbeafe}
.topic{background:rgba(255,255,255,0.02);padding:4px 7px;border-radius:8px;font-size:12px;color:var(--muted);border:1px solid rgba(255,255,255,0.02)}
.meta{display:flex;gap:12px;margin-top:10px;color:var(--muted);align-items:center;font-size:13px}
.pin{margin-left:auto;cursor:pointer;background:transparent;border:0;color:var(--muted)}
.pinned{color:#ffd166}
/* Dynamic footer card */
footer.card-dynamic { grid-column:1/-1; background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); border-radius:12px; padding:18px; display:grid; grid-template-columns:1fr 360px; gap:18px; align-items:start; border:1px solid rgba(255,255,255,0.02); margin-top:12px; }
@media (max-width:920px){ footer.card-dynamic { grid-template-columns:1fr } }
.stats-panel{cursor:pointer;border:1px solid rgba(255,255,255,0.03);border-radius:10px;padding:12px;background:var(--card);transition:all 0.2s}
.stats-panel:hover{background:rgba(88,166,255,0.04)}
.stats-content{display:none;margin-top:10px;gap:12px;flex-wrap:wrap}
.stat { background:rgba(255,255,255,0.02); padding:10px 12px; border-radius:10px; min-width:120px; text-align:center }
.stat h4{ margin:0; font-size:18px }
.stat p{ margin:0; color:var(--muted); font-size:13px }
/* Testimonial carousel */
.carousel{overflow:hidden;position:relative;width:100%;height:110px;margin-top:12px;border-radius:10px}
.carousel-track{display:flex;transition:transform 0.5s ease}
.carousel-item{min-width:100%;padding:12px;background:var(--card);border-radius:10px;text-align:center;color:var(--muted);font-size:14px;display:flex;align-items:center;justify-content:center}
.carousel-controls{display:flex;gap:8px;justify-content:center;margin-top:8px}
/* contact & resume */
.contact-form input,.contact-form textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;margin-bottom:8px}
.contact-actions{display:flex;gap:8px;flex-wrap:wrap}
.download-btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021124;padding:10px 14px;border-radius:8px;border:0;font-weight:700;cursor:pointer;text-decoration:none}
/* small helpers */
.flex{display:flex;align-items:center;gap:8px}
input[type=number]{width:86px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
label{font-size:13px;color:var(--muted)}
/* light theme */
body.light{background:var(--light-bg);color:var(--light-text)}
body.light .card{background:var(--light-panel);border-color:rgba(2,6,23,0.03)}
body.light .repo{background:#fff;border-color:#e6edf3}
body.light .repo h4 a{color:var(--light-accent)}
body.light .repo p{color:#475057}
body.light .lang{background:#f3f4f6;color:var(--light-text)}
body.light .topic{background:#f8fafc;color:var(--light-text);border:1px solid #eef2f6}
body.light input[type=number]{background:#fff;color:var(--light-text)}
body.light button.btn{background:rgba(2,6,23,0.04)}
</style>
</head>
<body>
<header>
  <div class="brand">
    <img src="https://github.com/SinGhRishaBBh.png" alt="avatar">
    <div>
      <div class="who">Rishabh Raj</div>
      <div class="sub">AI Postgraduate ‚Ä¢ ML & AQI research</div>
    </div>
  </div>
  <div class="actions">
    <button id="theme-btn" class="btn">üåô</button>
    <a href="https://github.com/SinGhRishaBBh" target="_blank" style="color:var(--accent);font-weight:600;text-decoration:none">GitHub ‚Üí</a>
  </div>
</header>

<main class="container">
<aside class="card">
  <div class="profile">
    <img src="https://github.com/SinGhRishaBBh.png" alt="Rishabh">
    <h2>Rishabh Raj</h2>
    <p>I build data-driven apps and ML models ‚Äî AQI prediction, dashboards & full-stack tools. Open to collabs & research.</p>
    <div class="socials">
      <a href="https://github.com/SinGhRishaBBh" target="_blank">GitHub</a>
      <a href="https://www.linkedin.com/in/rishabh-raj-767b13212/" target="_blank">LinkedIn</a>
      <a href="mailto:rishabh079singh@gmail.com">Email</a>
    </div>
  </div>
  <hr style="margin:14px 0;border:0;height:1px;background:rgba(255,255,255,0.02)">
  <div style="margin-top:8px">
    <h4 style="margin:0 0 8px 0;color:var(--accent)">Contact & Resume</h4>
    <div style="display:flex;gap:8px;flex-direction:column">
      <a class="download-btn" href="./resume.pdf" download>‚¨áÔ∏è Download CV</a>
      <button id="download-gmail" class="btn" style="padding:10px;border-radius:8px">Request CV via Gmail</button>
      <a class="btn" href="https://www.linkedin.com/in/rishabh-raj-767b13212/" target="_blank" style="text-decoration:none">Message on LinkedIn</a>
    </div>
  </div>
  <hr style="margin:14px 0;border:0;height:1px;background:rgba(255,255,255,0.02)">
  <div style="font-size:13px;color:var(--muted)">
    <strong>Experience</strong>
    <div style="margin-top:8px">
      <div style="font-weight:600">Research Intern ‚Äî CSIR CRRI</div>
      <div style="font-size:12px;color:var(--muted)">Jan 2025 ‚Äî Jun 2025</div>
    </div>
  </div>
</aside>

<section>
  <div class="sectionTitle">
    <h3>Pinned Repositories</h3>
    <div style="font-size:13px;color:var(--muted)">Auto-updated from GitHub</div>
  </div>
  <div style="display:flex;gap:12px;margin-top:12px;align-items:center">
    <label style="font-size:13px;color:var(--muted)">Min stars</label>
    <input id="starFilter" type="number" min="0" value="0" />
    <button id="applyFilter" class="btn">Apply</button>
  </div>
  <div id="repo-grid" class="repo-grid">
    <div style="grid-column:1/-1;color:var(--muted)">Loading repositories‚Ä¶</div>
  </div>
</section>
</main>

<script>
const GITHUB_USER = "SinGhRishaBBh";
const EXCLUDE_REPO = "SinGhRishaBBh";
const MAX_REPOS = 12;
const MY_EMAIL = "rishabh079singh@gmail.com";
const MY_LINKEDIN = "https://www.linkedin.com/in/rishabh-raj-767b13212/";
const RESUME_PATH = "./resume.pdf";

const repoGrid = document.getElementById("repo-grid");
const totalReposEl = document.getElementById("total-repos");
const displayedReposEl = document.getElementById("displayed-repos");
const totalStarsEl = document.getElementById("total-stars");
const totalForksEl = document.getElementById("total-forks");
const toggleStatsBtn = document.getElementById("toggle-stats");
const statsContent = document.getElementById("stats-content");
const starFilterInput = document.getElementById("starFilter");
const applyFilterBtn = document.getElementById("applyFilter");

let pinned = JSON.parse(localStorage.getItem("gh_portfolio_pins")||"[]");
let currentRepos = [];

const starSVG = `<svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M8 12.026l3.472 2.25-.93-3.763L13.8 7.7l-3.85-.336L8 3.5 6.05 7.363 2.2 7.7l2.258 2.813-.93 3.763L8 12.026z"/></svg>`;
const forkSVG = `<svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor"><path d="M5 3.25A1.75 1.75 0 1 0 5 6.75c.965 0 1.75-.784 1.75-1.75V6h1.5v1.5c0 .966.784 1.75 1.75 1.75A1.75 1.75 0 1 0 12 6.25V3.25A1.75 1.75 0 1 0 12 0.75c-.965 0-1.75.784-1.75 1.75v1.5H8.75v-1.5C8.75.784 7.966 0 7 0A1.75 1.75 0 1 0 5 3.25z"/></svg>`;

function escapeHtml(s){ return String(s||"").replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
function nFmt(x){ return (x||0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","); }

function linkify(text){
  if(!text) return '';
  return text
    .replace(/#(\d+)/g, `<a href="https://github.com/${GITHUB_USER}/$1" target="_blank">#$1</a>`)
    .replace(/@([\w-]+)/g, `<a href="https://github.com/$1" target="_blank">@$1</a>`)
    .replace(/(https?:\/\/[^\s]+)/g, `<a href="$1" target="_blank">$1</a>`);
}

async function fetchReadmeFirstParagraph(repoName){
  try{
    const res = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${repoName}/readme`,{headers:{'Accept':'application/vnd.github.v3.raw'}});
    if(!res.ok) return null;
    const text = await res.text();
    const para = text.split(/\n\s*\n/).find(p=>p.trim().length>0);
    return para?para.trim():null;
  }catch{return null;}
}

async function createRepoCard(repo){
  const div = document.createElement("div");
  div.className = "repo";

  const topLangs = repo.language?[repo.language]:[];
  const isPinned = pinned.includes(repo.name);

  let readmePara = await fetchReadmeFirstParagraph(repo.name);
  let description = repo.description||'';
  if(readmePara) description += (description?'\\n\\n':'')+readmePara;
  description = linkify(description);

  div.innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:8px">
      <h4><a href="${repo.html_url}" target="_blank" rel="noopener noreferrer">${escapeHtml(repo.name)}</a></h4>
      <button class="pin" title="${isPinned?'Unpin':'Pin'}">${isPinned?'üìå':'üìç'}</button>
    </div>
    <p>${description}</p>
    <div class="badges">
      ${topLangs.map(l=>`<span class="lang">${escapeHtml(l)}</span>`).join('')}
      ${repo.topics?repo.topics.slice(0,4).map(t=>`<span class="topic">${escapeHtml(t)}</span>`).join(''):""}
    </div>
    <div class="meta">
      <span class="flex">${starSVG}<span style="margin-left:4px">${nFmt(repo.stargazers_count)}</span></span>
      <span class="flex">${forkSVG}<span style="margin-left:4px">${nFmt(repo.forks_count)}</span></span>
      <span style="margin-left:auto;color:var(--muted);font-size:12px">Updated ${new Date(repo.updated_at).toLocaleDateString()}</span>
    </div>
  `;

  const pinBtn = div.querySelector(".pin");
  pinBtn.addEventListener("click",()=>{
    if(pinned.includes(repo.name)) pinned = pinned.filter(x=>x!==repo.name);
    else pinned.unshift(repo.name);
    if(pinned.length>6) pinned = pinned.slice(0,6);
    localStorage.setItem("gh_portfolio_pins",JSON.stringify(pinned));
    renderRepos(currentRepos);
  });
  if(isPinned) pinBtn.classList.add("pinned");
  return div;
}

async function fetchRepos(){
  const res = await fetch(`https://api.github.com/users/${GITHUB_USER}/repos?per_page=100&sort=updated`);
  const data = await res.json();
  currentRepos = data.filter(r=>r.name!==EXCLUDE_REPO);
  renderRepos(currentRepos);
}

async function renderRepos(repos){
  const minStars = parseInt(starFilterInput.value)||0;
  const filtered = repos.filter(r=>r.stargazers_count>=minStars);
  repoGrid.innerHTML = '';
  for(const r of filtered.slice(0,MAX_REPOS)){
    const card = await createRepoCard(r);
    repoGrid.appendChild(card);
  }
}

document.getElementById("theme-btn").addEventListener("click",()=>{
  document.body.classList.toggle("light");
});

applyFilterBtn.addEventListener("click",()=>renderRepos(currentRepos));
document.getElementById("download-gmail").addEventListener("click",()=>window.location=`mailto:${MY_EMAIL}?subject=Request CV&body=Hi Rishabh, please share your CV.`);

fetchRepos();
</script>
</body>
</html>
