<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Rishabh Raj ‚Ä¢ GitHub-style Portfolio</title>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<style>
:root{
  --bg:#0d1117; --panel:#161b22; --card:#21262d; --muted:#8b949e; --accent:#58a6ff; --glass: rgba(255,255,255,0.03);
  --transition:0.25s ease;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,Arial;}
body{background:var(--bg);color:#c9d1d9;-webkit-font-smoothing:antialiased;transition:background var(--transition),color var(--transition);}
body.light{--bg:#f5f5f5;--panel:#fff;--card:#fefefe;--muted:#6b7280;--accent:#3b82f6;}
header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-bottom:1px solid rgba(255,255,255,0.03);}
.brand{display:flex;gap:12px;align-items:center;}
.brand img{width:48px;height:48px;border-radius:50%;border:2px solid rgba(255,255,255,0.04);}
.who{font-weight:700;font-size:17px;}
.sub{font-size:12px;color:var(--muted);}
.actions{display:flex;gap:10px;align-items:center;}
button.btn{padding:6px 10px;border-radius:8px;border:0;background:var(--glass);color:inherit;cursor:pointer;transition:background var(--transition);}
button.btn:hover{background:rgba(88,166,255,0.1);}
.container{max-width:1100px;margin:20px auto;padding:0 16px;display:grid;grid-template-columns:300px 1fr;gap:18px;align-items:start;}
@media (max-width:920px){ .container{grid-template-columns:1fr;} header{padding:12px;} .brand img{width:44px;height:44px;} }
.card{background:var(--panel);padding:16px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);transition:background var(--transition);}
.profile{text-align:center;}
.profile img{width:96px;height:96px;border-radius:999px;object-fit:cover;border:2px solid rgba(255,255,255,0.04);}
.profile h2{margin:10px 0 4px;font-size:18px;}
.profile p{margin:0;color:var(--muted);font-size:13px;line-height:1.35;}
.socials{display:flex;gap:8px;justify-content:center;margin-top:10px;}
.socials a{color:var(--accent);text-decoration:none;font-weight:600;font-size:13px;}
.sectionTitle{display:flex;align-items:center;justify-content:space-between;}
.repo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-top:12px;}
.repo{background:var(--card);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);transition:transform var(--transition),box-shadow var(--transition);}
.repo:hover{transform:translateY(-4px);box-shadow:0 10px 25px rgba(0,0,0,0.4);}
.repo h4{margin:0 0 6px 0;font-size:15px;}
.repo h4 a{color:var(--accent);text-decoration:none;font-weight:600;}
.repo p{margin:0 0 8px;color:var(--muted);font-size:13px;white-space:pre-wrap;line-height:1.35;}
.badges{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px;}
.lang{background:rgba(255,255,255,0.04);padding:4px 8px;border-radius:999px;font-size:12px;color:#dbeafe;}
.topic{background:rgba(255,255,255,0.08);padding:3px 7px;border-radius:8px;font-size:11px;color:var(--muted);border:1px solid rgba(255,255,255,0.02);}
.meta{display:flex;gap:12px;margin-top:10px;color:var(--muted);align-items:center;font-size:13px;}
.pin{margin-left:auto;cursor:pointer;background:transparent;border:0;color:var(--muted);transition:color var(--transition);}
.pinned{color:#ffd166;}
.readme-images img{max-width:100%;border-radius:8px;margin-top:6px;}
.collapsible{background:var(--glass);border:none;padding:6px 10px;border-radius:8px;color:var(--accent);cursor:pointer;width:100%;text-align:left;margin-top:6px;transition:background var(--transition);}
.collapsible:hover{background:rgba(88,166,255,0.1);}
.content{max-height:0;overflow:hidden;transition:max-height 0.3s ease-out;}
.readme-preview{background:var(--glass);padding:8px;border-radius:10px;margin-top:6px;opacity:0;transition:opacity 0.25s;}
.repo:hover .readme-preview{opacity:1;}
</style>
</head>
<body>
<header>
  <div class="brand">
    <img src="https://github.com/SinGhRishaBBh.png" alt="avatar">
    <div>
      <div class="who">Rishabh Raj</div>
      <div class="sub">AI Postgraduate ‚Ä¢ ML & AQI Research</div>
    </div>
  </div>
  <div class="actions">
    <button id="theme-btn" class="btn">üåô</button>
    <a href="https://github.com/SinGhRishaBBh" target="_blank" style="color:var(--accent);font-weight:600;text-decoration:none">GitHub ‚Üí</a>
  </div>
</header>

<main class="container">
<aside class="card">
  <div class="profile">
    <img src="https://github.com/SinGhRishaBBh.png" alt="Rishabh">
    <h2>Rishabh Raj</h2>
    <p>I build data-driven apps & ML models ‚Äî AQI prediction, dashboards & full-stack tools. Open to collabs & research.</p>
    <div class="socials">
      <a href="https://github.com/SinGhRishaBBh" target="_blank">GitHub</a>
      <a href="https://www.linkedin.com/in/rishabh-raj-767b13212/" target="_blank">LinkedIn</a>
      <a href="mailto:rishabh079singh@gmail.com">Email</a>
    </div>
  </div>
  <hr style="margin:14px 0;border:0;height:1px;background:rgba(255,255,255,0.02)">
  <div>
    <h4 style="margin:0 0 8px 0;color:var(--accent)">Contact & Resume</h4>
    <a class="btn" href="./resume.pdf" download>‚¨áÔ∏è Download CV</a>
  </div>
</aside>

<section>
  <div class="sectionTitle">
    <h3>Pinned Repositories</h3>
    <div style="font-size:13px;color:var(--muted)">Auto-updated from GitHub</div>
  </div>
  <div style="display:flex;gap:12px;margin-top:12px;align-items:center">
    <label>Min stars</label>
    <input id="starFilter" type="number" min="0" value="0">
    <button id="applyFilter" class="btn">Apply</button>
  </div>
  <div id="repo-grid" class="repo-grid">
    <div style="grid-column:1/-1;color:var(--muted)">Loading repositories‚Ä¶</div>
  </div>
</section>
</main>

<script>
const GITHUB_USER = "SinGhRishaBBh";
const MAX_REPOS = 12;
const repoGrid = document.getElementById("repo-grid");
const starFilterInput = document.getElementById("starFilter");
const applyFilterBtn = document.getElementById("applyFilter");
let currentRepos = [];
let pinned = JSON.parse(localStorage.getItem("gh_portfolio_pins")||"[]");

function escapeHtml(s){ return String(s||"").replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c])); }
function linkify(text){
  if(!text) return '';
  return text
    .replace(/#(\d+)/g, `<a href="https://github.com/${GITHUB_USER}/$1" target="_blank">#$1</a>`)
    .replace(/@([\w-]+)/g, `<a href="https://github.com/$1" target="_blank">@$1</a>`)
    .replace(/(https?:\/\/[^\s]+)/g, `<a href="$1" target="_blank">$1</a>`);
}

async function fetchReadmeContent(repoName){
  try{
    const res = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${repoName}/readme`);
    if(!res.ok) return null;
    const data = await res.json();
    const content = atob(data.content);
    const firstPara = content.split(/\n\s*\n/).find(p=>p.trim().length>0);
    const imageUrls = [...content.matchAll(/!\[.*?\]\((.*?)\)/g)].map(m=>m[1]);
    return {text:firstPara, images:imageUrls};
  }catch{return null;}
}

async function createRepoCard(repo){
  const div = document.createElement("div");
  div.className = "repo";
  const isPinned = pinned.includes(repo.name);
  const readmeData = await fetchReadmeContent(repo.name);
  let description = repo.description||'';
  if(readmeData?.text) description += (description?'\\n\\n':'')+readmeData.text;
  description = marked.parse(linkify(description));

  const topLangs = repo.language?[repo.language]:[];
  const topics = repo.topics||[];

  div.innerHTML = `
    <div style="display:flex;align-items:flex-start;gap:8px">
      <h4><a href="${repo.html_url}" target="_blank" rel="noopener noreferrer">${escapeHtml(repo.name)}</a></h4>
      <button class="pin" title="${isPinned?'Unpin':'Pin'}">${isPinned?'üìå':'üìç'}</button>
    </div>
    <p>${description}</p>
    <div class="readme-preview">${readmeData?.images?.length>0?readmeData.images.slice(0,3).map(img=>`<img src="${img}">`).join(''):''}</div>
    <div class="badges">
      ${topLangs.map(l=>`<span class="lang">${escapeHtml(l)}</span>`).join('')}
      ${topics.map(t=>`<span class="topic">${escapeHtml(t)}</span>`).join('')}
    </div>
    <button class="collapsible">View Stats ‚ö°</button>
    <div class="content">
      <div class="meta">
        <span>‚≠ê Stars: ${repo.stargazers_count}</span>
        <span>üç¥ Forks: ${repo.forks_count}</span>
        <span>üëÄ Watchers: ${repo.watchers_count}</span>
        <span>üêõ Open Issues: ${repo.open_issues_count}</span>
      </div>
    </div>
  `;

  div.querySelector(".pin").addEventListener("click",()=>{
    if(isPinned) pinned = pinned.filter(x=>x!==repo.name);
    else pinned.unshift(repo.name);
    localStorage.setItem("gh_portfolio_pins",JSON.stringify(pinned));
    renderRepos(currentRepos);
  });

  const coll = div.querySelector(".collapsible");
  const contentDiv = div.querySelector(".content");
  coll.addEventListener("click",()=>{contentDiv.style.maxHeight = contentDiv.style.maxHeight ? null : contentDiv.scrollHeight + "px";});

  return div;
}

async function fetchRepos(){
  const res = await fetch(`https://api.github.com/users/${GITHUB_USER}/repos?per_page=100&sort=updated`);
  const data = await res.json();
  currentRepos = data;
  renderRepos(currentRepos);
}

async function renderRepos(repos){
  const minStars = parseInt(starFilterInput.value)||0;
  const filtered = repos.filter(r=>r.stargazers_count>=minStars);
  repoGrid.innerHTML = '';
  for(const r of filtered.slice(0,MAX_REPOS)){
    const card = await createRepoCard(r);
    repoGrid.appendChild(card);
  }
}

document.getElementById("theme-btn").addEventListener("click",()=>document.body.classList.toggle("light"));
applyFilterBtn.addEventListener("click",()=>renderRepos(currentRepos));

fetchRepos();
</script>
</body>
</html>
